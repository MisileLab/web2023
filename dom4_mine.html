<!DOCTYPE html>
<html lang="ko">
  <head>
    <style>
      * {
      text-align: center;
      }
      #board {
      margin-left: auto;
      margin-right: auto;
      }
      #board tr td {
      border: 1px solid white;
      background: #34da79;
      width: 16px;
      height: 16px;
      text-align: center;
      }
      #board tr td.clicked {
      background: #6c5ee7;
      }
      #board tr td.mine {
      background: #FF0000;
      }
    </style>
  </head>
  <body>
    <h1>지뢰찾기</h1>
    <table id="board"></table>
    <BUTTON onclick="genGrid();">새로운 게임</BUTTON>
    <script>
      let grid = document.getElementById("board");
      let finished = false;
      genGrid();
      
      function genGrid() {
          grid.innerHTML = "";
          for (let i = 0; i < 8; i++) {
              let a = "";
              a += "<tr>"
              for (var j = 0; j < 8; j++) {
                a+="<td mine="
                  if (Math.random() < 0.3)
                    a+="true";
                  else
                    a+="false";
                a+=" onClick='clickBox(this)'></td>"
              }
            a += "</tr>";
          grid.innerHTML += a;
            console.log(grid.innerHTML);
          }
        finished = false;
      }
      
      function clickBox(cell) {
        if (finished) {return;}
          if (cell.getAttribute("mine") == "true") {
              cell.className = "mine";
              alert("게임이 종료되었습니다.");
              finished = true;
          } else {
              cell.className = "clicked";
          }
      }
    </script>
  </body>
</html>

